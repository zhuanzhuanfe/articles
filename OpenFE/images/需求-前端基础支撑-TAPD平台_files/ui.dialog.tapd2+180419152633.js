!function(t){function i(i,e,a,o){function s(a){var o=t[i][e][a]||[];return"string"==typeof o?o.split(/,?\s+/):o}var n=s("getter");return 1==o.length&&"string"==typeof o[0]&&(n=n.concat(s("getterSetter"))),-1!=t.inArray(a,n)}t.widget_old=function(e,a){var o=e.split(".")[0];e=e.split(".")[1],t.fn[e]=function(a){var s="string"==typeof a,n=Array.prototype.slice.call(arguments,1);if(s&&"_"==a.substring(0,1))return this;if(s&&i(o,e,a,n)){var l=t.data(this[0],e);return l?l[a].apply(l,n):void 0}return this.each(function(){var i=t.data(this,e);!i&&!s&&t.data(this,e,new t[o][e](this,a))._init(),i&&s&&t.isFunction(i[a])&&i[a].apply(i,n)})},t[o]=t[o]||{},t[o][e]=function(i,a){var s=this;this.namespace=o,this.widgetName=e,this.widgetEventPrefix=t[o][e].eventPrefix||e,this.widgetBaseClass=o+"-"+e,this.options=t.extend({},t.widget_old.defaults,t[o][e].defaults,t.metadata&&t.metadata.get(i)[e],a),this.element=t(i).bind("setData."+e,function(t,e,a){return t.target==i?s._setData(e,a):void 0}).bind("getData."+e,function(t,e){return t.target==i?s._getData(e):void 0}).bind("remove",function(){return s.destroy()})},t[o][e].prototype=t.extend({},t.widget_old.prototype,a),t[o][e].getterSetter="option"},t.widget_old.prototype={_init:function(){},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled")},option:function(i,e){var a=i,o=this;if("string"==typeof i){if(void 0===e)return this._getData(i);a={},a[i]=e}t.each(a,function(t,i){o._setData(t,i)})},_getData:function(t){return this.options[t]},_setData:function(t,i){this.options[t]=i,"disabled"==t&&this.element[i?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",i)},enable:function(){this._setData("disabled",!1)},disable:function(){this._setData("disabled",!0)},_trigger:function(i,e,a){var o=this.options[i],s=i==this.widgetEventPrefix?i:this.widgetEventPrefix+i;if(e=t.Event(e),e.type=s,e.originalEvent)for(var n,l=t.event.props.length;l;)n=t.event.props[--l],e[n]=e.originalEvent[n];return this.element.trigger(e,a),!(t.isFunction(o)&&o.call(this.element[0],e,a)===!1||e.isDefaultPrevented())}},t.widget_old.defaults={disabled:!1}}(jQuery),function(t){var i={dragStart:"start.draggable",drag:"drag.draggable",dragStop:"stop.draggable",maxHeight:"maxHeight.resizable",minHeight:"minHeight.resizable",maxWidth:"maxWidth.resizable",minWidth:"minWidth.resizable",resizeStart:"start.resizable",resize:"drag.resizable",resizeStop:"stop.resizable"},e="ui-dialog ";t.widget_old("ui.dialog",{_init:function(){this.originalTitle=this.element.attr("title");var i,a=this,o=this.options,s=o.title||this.originalTitle||"&nbsp;",n=t.ui.dialog.getTitleId(this.element),l=t.browser.msie||1!=o.ifAnimation?"":"d-animation ",r=o.simple,d=o.lightWeight,h=o.fullscreen,u=r?"dialog-simple ":"",g=d?"dialog-lightweight ":"",c=o.customClass||"",p=r?"":"hidden",m=o.id||"",f=(this.uiDialog=t("<div/>")).appendTo(document.body).hide().addClass(e+u+g+c+" "+l+o.dialogClass).attr("id",m+"-wrapper").css({position:"absolute",overflow:p,zIndex:o.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){o.closeOnEscape&&i.keyCode&&i.keyCode==t.ui.keyCode.ESCAPE&&a.close(i)}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(t){a.moveToTop(!1,t)});i=r?t("<div></div>").addClass("dialog-simple-inner").appendTo(f):f;var v=this.element.show().removeAttr("title").addClass("ui-dialog-content").appendTo(i),b=r?"dialog-close-wrap":"ui-dialog-titlebar",w=(this.uiDialogTitlebar=t("<div></div>")).addClass(b).prependTo(i);if(v.addClass("webkit-scrollbar"),h&&!r){var y=t('<a href="#"/>').addClass("ui-dialog-action ui-dialog-max").attr("title","最大化").mousedown(function(t){y.addClass("ui-state-focus"),t.stopPropagation()}).mouseup(function(){y.removeClass("ui-state-focus")}).click(function(i){var e,a=f.find(".ui-dialog-content"),o=a.height(),s=f.find("#"+m+"-iframe").contents(),n=t("html");return f.attr("fullscreen")?(s.find(".tfl-editor-wrapper.editor-maximize").length>0&&s.find(".editor-area").height(a.data("originalData").height-s.find(".editor-toolbar").outerHeight()-1),n.removeClass("html-overflow-hidden"),y.removeClass("ui-dialog-restore").addClass("ui-dialog-max").attr("title","最大化"),f.removeAttr("fullscreen").css({height:"auto"}).animate(f.data("originalData")),a.animate(a.data("originalData"))):(n.addClass("html-overflow-hidden"),y.removeClass("ui-dialog-max").addClass("ui-dialog-restore").attr("title","还原"),f.data("originalData",{top:f.css("top"),left:f.css("left"),width:f.css("width")}).attr("fullscreen",!0).css({height:"auto"}).animate({top:t(window).scrollTop(),left:0,width:"100%"}),e=document.documentElement.clientHeight-w.outerHeight()-f.find(".ui-dialog-buttonpane").outerHeight()-3,s.find(".font-editor-fullscreen-restore").length>0&&s.find(".editor-area").height(e-s.find(".editor-toolbar").outerHeight()-1),a.data("originalData",{height:o}).animate({height:e})),t(this).blur(),!1}).appendTo(w);t("<span/>").appendTo(y)}var x=t('<a href="#"/>').addClass("ui-dialog-action ui-dialog-close font font-close").attr("title","关闭").mousedown(function(t){x.addClass("ui-state-focus"),t.stopPropagation()}).mouseup(function(){x.removeClass("ui-state-focus")}).click(function(t){return a.close(t),!1}).appendTo(w),C=r?"×":o.closeText;(this.uiDialogTitlebarCloseText=t("<span/>")).text(C).appendTo(x);if(!r){t("<span/>").addClass("ui-dialog-title").attr("id",n).html(s).prependTo(w)}if(w.find("*").add(w).disableSelection(),r){t('<b class="ui-dialog-arrow"></b><b class="ui-dialog-arrow-inner"></b>').prependTo(f)}o.draggable&&t.fn.draggable&&this._makeDraggable(),o.resizable&&t.fn.resizable&&this._makeResizable(),this._createButtons(o.buttons),this._isOpen=!1,o.bgiframe&&t.fn.bgiframe&&f.bgiframe(),o.autoOpen&&this.open()},destroy:function(){this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle)},close:function(i){var e=this;if(!t.browser.msie&&e.options.ifAnimation&&e.options.hideAnimation){t(".ui-widget-overlay").addClass("d-animation-hide"),e.uiDialog.addClass("d-animation-hide");var a=300;setTimeout(function(){e._close(i)},a)}else e._close(i)},_close:function(i){var e=this;if(!1!==e._trigger("beforeclose",i)){if(e.overlay&&e.overlay.destroy(),e.uiDialog.unbind("keypress.ui-dialog"),e.options.hide?e.uiDialog.hide(e.options.hide,function(){e._trigger("close",i)}):e.uiDialog.hide()&&e._trigger("close",i),t.ui.dialog.overlay.resize(),e._isOpen=!1,e.options.modal){var a=0;t(".ui-dialog").each(function(){this!=e.uiDialog[0]&&(a=Math.max(a,t(this).css("z-index")))}),t.ui.dialog.maxZ=a}!t.browser.msie&&e.options.ifAnimation&&e.uiDialog.removeClass("d-animation-show d-animation-hide");var o=t("html");o.hasClass("html-overflow-hidden")&&o.removeClass("html-overflow-hidden"),t(document).trigger("dialogClose")}},isOpen:function(){return this._isOpen},moveToTop:function(i,e){if(this.options.modal&&!i||!this.options.stack&&!this.options.modal)return this._trigger("focus",e);this.options.zIndex>t.ui.dialog.maxZ&&(t.ui.dialog.maxZ=this.options.zIndex),this.overlay&&this.overlay.$el.css("z-index",t.ui.dialog.overlay.maxZ=++t.ui.dialog.maxZ);var a={scrollTop:this.element.attr("scrollTop"),scrollLeft:this.element.attr("scrollLeft")};this.uiDialog.css("z-index",++t.ui.dialog.maxZ),this.element.attr(a),this._trigger("focus",e)},open:function(){if(!this._isOpen){var i=this.options,e=this.uiDialog;if(this.overlay=i.modal?new t.ui.dialog.overlay(this):null,i.modal?t.ui.dialog.maxZ=this.options.zIndex:"",e.next().length&&e.appendTo("body"),this._size(),i.simple&&i.trigger){var a,o,s,n,l=document,r=t(l),d=t(i.trigger),h=d.offset(),u=i.width-d.outerWidth(),g=l.documentElement.clientWidth,c=h.left-r.scrollLeft(),p=h.left-r.scrollLeft()-u/2,m=i.arrowPosition;n="left"==m?c:"center"==m?p:i.lightWeight?c:p,0>n?(a=c,e.addClass("dialog-arrow-left")):n+i.width>g?(a=c-u,e.addClass("dialog-arrow-right")):(a=n,("left"==m||"center"!=m&&i.lightWeight)&&e.addClass("dialog-arrow-left")),o=h.top-r.scrollTop()+d.outerHeight()+8;var f=i.offset;if(f){var v=f.split(","),b=parseInt(v[0]),w=parseInt(v[1])||0;a+=b,o+=w}s=[a,o],i.position=s}this._position(i.position),e.show(i.show),this.moveToTop(!0),e.focus(),this._trigger("open"),this._isOpen=!0,!t.browser.msie&&i.ifAnimation&&setTimeout(function(){e.addClass("d-animation-show")},50)}},_createButtons:function(i){if("string"==typeof i&&""!=i)this._createMyButtons(i);else{var e=this,a=!1,o=t("<div></div>").addClass("ui-dialog-buttonpane"),s=t("<div></div>").addClass("ui-dialog-buttonset");this.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof i&&null!==i&&t.each(i,function(){return!(a=!0)}),a?(t.each(i,function(i,a){"取消"==i?t('<a href="javascript:;"></a>').addClass("btn").html("<span>"+i+"</span>").click(function(t){t.preventDefault(),a.apply(e.element[0],arguments)}).appendTo(s):t('<a href="javascript:;"></a>').addClass("btn btn-primary").html("<span>"+i+"</span>").click(function(t){t.preventDefault(),a.apply(e.element[0],arguments)}).appendTo(s)}),s.appendTo(o),o.appendTo(this.uiDialog)):this.uiDialog.addClass("ui-button-none")}},_createMyButtons:function(i){var e=t("<div></div>").addClass("ui-dialog-buttonpane"),a=this.options.id?this.options.id+"-buttonwrap":"",o=t("<div></div>").addClass("ui-dialog-buttonset").attr("id",a);if(this.uiDialog.find(".ui-dialog-buttonpane").remove(),"string"==typeof i&&""!=i){for(var s=i.split(","),n=0;n<s.length;n++){var l=s[n].split(":"),r=l[0],d=l[1],h="",u=r.split("`"),r=u[0];u[1]?h=u[1].replace(/\./g," "):0===n&&(h="btn-primary"),t('<a href="javascript:;"></a>').addClass("btn disabled "+h).html("<span>"+r+"</span>").attr("name",d).appendTo(o)}o.appendTo(e),e.appendTo(this.uiDialog)}},_makeDraggable:function(){var i,e=this,a=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content",handle:".ui-dialog-titlebar,.dialog-close-wrap",containment:"document",start:function(){i="auto"===a.height?"auto":t(this).height(),t(this).height(t(this).height()).addClass("ui-dialog-dragging"),a.dragStart&&a.dragStart.apply(e.element[0],arguments)},drag:function(){a.drag&&a.drag.apply(e.element[0],arguments)},stop:function(){t(this).removeClass("ui-dialog-dragging").height(i),a.dragStop&&a.dragStop.apply(e.element[0],arguments),t.ui.dialog.overlay.resize()}})},_makeResizable:function(i){i=void 0===i?this.options.resizable:i;var e=this,a=this.options,o="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:a.minHeight,start:function(){t(this).addClass("ui-dialog-resizing"),a.resizeStart&&a.resizeStart.apply(e.element[0],arguments)},resize:function(){a.resize&&a.resize.apply(e.element[0],arguments)},handles:o,stop:function(){t(this).removeClass("ui-dialog-resizing"),a.height=t(this).height(),a.width=t(this).width(),a.resizeStop&&a.resizeStop.apply(e.element[0],arguments),t.ui.dialog.overlay.resize()}}).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_position:function(i){var e=t(window),a=t(document),o=a.scrollTop(),s=a.scrollLeft(),n=o;if(t.inArray(i,["center","top","right","bottom","left"])>=0&&(i=["right"==i||"left"==i?i:"center","top"==i||"bottom"==i?i:"middle"]),i.constructor!=Array&&(i=["center","middle"]),i[0].constructor==Number)s+=i[0];else switch(i[0]){case"left":s+=0;break;case"right":s+=e.width()-this.uiDialog.outerWidth();break;default:case"center":s+=(e.width()-this.uiDialog.outerWidth())/2}if(i[1].constructor==Number)o+=i[1];else switch(i[1]){case"top":o+=0;break;case"bottom":o+=e.height()-this.uiDialog.outerHeight();break;default:case"middle":o+=(e.height()-this.uiDialog.outerHeight())/2}o=Math.max(o,n),this.uiDialog.css({top:parseInt(o),left:parseInt(s)})},_setData:function(a,o){switch(i[a]&&this.uiDialog.data(i[a],o),a){case"buttons":this._createButtons(o);break;case"closeText":this.uiDialogTitlebarCloseText.text(o);break;case"dialogClass":this.uiDialog.removeClass(this.options.dialogClass).addClass(e+o);break;case"draggable":o?this._makeDraggable():this.uiDialog.draggable("destroy");break;case"height":this.uiDialog.height(o);break;case"position":this._position(o);break;case"resizable":var s=this.uiDialog,n=this.uiDialog.is(":data(resizable)");n&&!o&&s.resizable("destroy"),n&&"string"==typeof o&&s.resizable("option","handles",o),n||this._makeResizable(o);break;case"title":t(".ui-dialog-title",this.uiDialogTitlebar).html(o||"&nbsp;");break;case"width":this.uiDialog.width(o)}t.widget_old.prototype._setData.apply(this,arguments)},_size:function(){var t=this.options;this.element.css({height:0,minHeight:0,width:"auto"});var i=this.uiDialog.css({height:"auto",width:t.width}).height();this.element.css({minHeight:Math.max(t.minHeight-i,0),height:"auto"==t.height?"auto":Math.max(t.height-i,0)})}}),t.extend(t.ui.dialog,{version:"1.7.2",defaults:{autoOpen:!0,bgiframe:!1,buttons:{},closeOnEscape:!0,closeText:"",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,ifAnimation:!0,hideAnimation:!1,position:"center",resizable:!0,show:null,stack:!0,title:"",fullscreen:!1,simple:!1,lightWeight:!1,trigger:null,arrowPosition:"",offset:"",width:300,zIndex:1e3},getter:"isOpen",uuid:0,maxZ:0,getTitleId:function(t){return"ui-dialog-title-"+(t.attr("id")||++this.uuid)},overlay:function(i){this.$el=t.ui.dialog.overlay.create(i)}}),t.extend(t.ui.dialog.overlay,{instances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(i){0===this.instances.length&&(setTimeout(function(){t.ui.dialog.overlay.instances.length&&t(document).bind(t.ui.dialog.overlay.events,function(e){var a=t(e.target);return a.is("html")&&i.uiDialog.focus(),a.hasClass("ui-dialog")||a.parents(".ui-dialog").length||a.parents(".ui-datepicker").length?!0:void 0})},1),t(document).bind("keydown.dialog-overlay",function(e){i.options.closeOnEscape&&e.keyCode&&e.keyCode==t.ui.keyCode.ESCAPE&&i.close(e)}),t(window).bind("resize.dialog-overlay",t.ui.dialog.overlay.resize));var e="white"==i.options.modal?"ui-widget-overlay overlay-white":"ui-widget-overlay",a=t("<div></div>").appendTo(document.body).addClass(e).css({width:this.width(),height:this.height()});return i.options.bgiframe&&t.fn.bgiframe&&a.bgiframe(),this.instances.push(a),a},destroy:function(i){this.instances.splice(t.inArray(this.instances,i),1),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),i.remove();var e=0;t.each(this.instances,function(){e=Math.max(e,this.css("z-index"))}),this.maxZ=e},height:function(){var i,e;if(t.browser.msie&&t.browser.version<7)return i=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),e=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e>i?t(window).height()+"px":i+"px";var a,o=t.browser.msie&&8==document.documentMode;return a=o&&document.body.scrollHeight<=t(window).height()+1?t(window).height():t(document).height(),a+"px"},width:function(){var i,e;return t.browser.msie?(i=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),e=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e>i?t(window).width()+"px":i+"px"):t(document).width()+"px"},resize:function(){var i=t([]);t.each(t.ui.dialog.overlay.instances,function(){i=i.add(this)}),i.css({width:0,height:0}).css({width:t.ui.dialog.overlay.width(),height:t.ui.dialog.overlay.height()})}}),t.extend(t.ui.dialog.overlay.prototype,{destroy:function(){t.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(t,i){t.ui&&t.ui.dialog&&(t.ui.dialog.overlay.events=t.map("focus,keydown,keypress".split(","),function(t){return t+".dialog-overlay"}).join(" "))}(jQuery);